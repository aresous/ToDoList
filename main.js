(()=>{"use strict";let e=1,t={},o=JSON.parse(localStorage.getItem("savedDict")),n=(e,o,n,l)=>{let r=document.createElement("div"),d=document.querySelector("#todoList");r.textContent=`${e.title}\n  ${e.desc}\n  ${e.date}\n  `,r.classList.add("ass"),"high"===e.prio?r.style.backgroundColor="red":"med"===e.prio?r.style.backgroundColor="yellow":"low"===e.prio&&(r.style.backgroundColor="green");let a=document.createElement("button");r.appendChild(a),a.textContent="x",r.addEventListener("click",(e=>{console.log(n)})),a.classList.add("taskDel"),a.addEventListener("click",(e=>{a.parentElement.remove(),console.log(n),console.log("FIX THIS: "+l),t[o].todoArray.splice(n,1),localStorage.setItem("savedDict",JSON.stringify(t))})),r.addEventListener("mouseenter",(e=>{a.style.display="inline"})),r.addEventListener("mouseleave",(e=>{a.style.display="none"})),d.appendChild(r)},l=document.createElement("ul");l.classList.add("projectList"),document.querySelector("#navbar").appendChild(l),document.querySelector("#addItemButton").addEventListener("click",(e=>{(()=>{let e=Date.now()-6e4*(new Date).getTimezoneOffset();document.querySelector(".active")||alert("you must select a project first!");let o=document.querySelector(".active").getAttribute("projdata-index"),l=document.createElement("div");console.log("currentProj ID: ",o),l.classList.add("addItem"),l.innerHTML=`\n      <form>\n          \n          <input  id="newFormTitle" placeholder="Task name"><br>\n          \n          <input  id="newFormDesc"  placeholder="Description"><br>\n          \n  \n          \n  \n          <input type="date" id="newFormDate" name="trip-start"\n          value="${e}"\n          min="${e}" max="2118-12-31">\n          <br>\n  \n          <input type="radio" id="newFormHigh" name="prio">\n          <label>High</label><br>\n          <input type="radio" id="newFormMedium" name="prio">\n          <label>Medium</label><br>\n          <input type="radio" id="newFormLow" name="prio">\n          <label>Low</label>\n  \n          \n          \n      </form> \n      <button id='addItemConfirm'>Confirm</button> \n      <button id='addItemCancel'> Cancel </button>\n      `,document.body.append(l);let r=document.querySelector("#newFormHigh"),d=document.querySelector("#newFormMedium"),a=document.querySelector("#newFormLow"),c=document.querySelector("#addItemConfirm"),i=document.querySelector("#addItemCancel"),s="low";i.addEventListener("click",(e=>{l.remove()})),c.addEventListener("click",(e=>{let c=document.querySelector("#newFormTitle").value,i=document.querySelector("#newFormDesc").value,m=document.querySelector("#newFormDate").value,u=!1;if(t[o].todoArray.forEach((e=>{e.title===c&&(u=!0)})),u)return void alert("Task name cannot be duplicated!!!");r.checked?s="high":d.checked?s="med":a.checked&&(s="low");let p={title:c,desc:i,date:m,prio:s,objId:Number(1),complete:!1};l.remove(),console.log("moments b4 array: ",t[o]),t[o].todoArray.push(p);let y=t[o].todoArray.findIndex((e=>e.title===c));return console.log("proj id"+o),n(p,o,y,"penis"),localStorage.setItem("savedDict",JSON.stringify(t)),p}))})()}));let r=(o,r,d)=>{console.log("addProjectToList");let a=document.createElement("li");a.textContent=o.projectName,a.classList.add("projectListItems");let c=0;r?(a.setAttribute("projdata-index",e),c=e):(a.setAttribute("projdata-index",d),c=d),r&&(t[Number(e)]=o),a.addEventListener("mouseenter",(e=>{i.textContent="X",i.style.display="inline"})),a.addEventListener("mouseleave",(e=>{i.style.display="none"})),e=Number(e)+1,localStorage.setItem("currentProjId",e);let i=document.createElement("button");i.classList.add("projDelButton"),a.appendChild(i),i.style.display="none",i.addEventListener("click",(e=>{delete t[c],a.remove(),localStorage.setItem("savedDict",JSON.stringify(t))})),localStorage.setItem("savedDict",JSON.stringify(t)),l.appendChild(a),a.addEventListener("click",(e=>{let t=document.querySelector(".active");document.querySelectorAll(".ass").forEach((e=>e.remove())),t&&t.classList.remove("active"),a.classList.add("active");let l=o.todoArray;l.forEach((e=>{let t=l.findIndex((t=>t.title===e.title));n(e,o.projectId,t)}))}))};if(document.querySelector(".addProjectButton").addEventListener("click",(o=>{console.log("add proj click"),console.log("onclick ID: ",e),(()=>{let o=document.createElement("div");o.classList.add("addItem"),o.innerHTML='\n      <form>\n          \n          <label for="title">Title:</label><br>\n          <input  id="newFormTitle" placeholder="task name"><br>\n          \n          \n      </form> \n      <button id=\'addItemConfirm\'>Confirm</button> \n      <button id=\'addItemCancel\'> Cancel </button>',document.body.append(o);let n=document.querySelector("#addItemConfirm");document.querySelector("#addItemCancel").addEventListener("click",(e=>{o.remove()})),n.addEventListener("click",(n=>{let l=((e,t)=>{let o=e,n=Number(t),l=[];return{todoArray:l,addToArray:e=>{l.push(e)},showArray:()=>{console.log(l)},projectName:o,projectId:n}})(document.querySelector("#newFormTitle").value,e);r(l,!0),localStorage.setItem("savedDict",JSON.stringify(t)),o.remove()}))})()})),o){let n=1;console.log(o),t=o,Object.entries(t).forEach((([e,t])=>{n<e&&(n=e),console.log(e),console.log(t),r(t,!1,e)})),console.log("largestkey = ",n),console.log("XXXXXXXXXXXXXXXXXXXXXXX"),e=Number(n)+1,console.log("savedProjId: "+e+" type: "+typeof e)}document.addEventListener("click",(e=>{console.log(t)}))})();