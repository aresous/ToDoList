(()=>{"use strict";let e=1,t={},o=JSON.parse(localStorage.getItem("savedDict")),n=(e,o,n,l)=>{let r=document.createElement("div"),d=document.querySelector("#todoList");r.textContent=`${e.title}\n    ${e.desc}\n    ${e.date}`,r.classList.add("ass"),"high"===e.prio?r.style.backgroundColor="red":"med"===e.prio?r.style.backgroundColor="yellow":"low"===e.prio&&(r.style.backgroundColor="green");let c=document.createElement("button");r.appendChild(c),c.textContent="x",r.addEventListener("click",(e=>{console.log(n)})),c.addEventListener("click",(e=>{c.parentElement.remove(),console.log(n),console.log("FIX THIS: "+l),t[o].todoArray.splice(n,1),localStorage.setItem("savedDict",JSON.stringify(t))})),d.appendChild(r)},l=document.createElement("ul");l.classList.add("projectList"),document.querySelector("#navbar").appendChild(l),document.querySelector("#addItemButton").addEventListener("click",(e=>{(()=>{document.querySelector(".active")||alert("you must select a project first!");let e=document.querySelector(".active").getAttribute("projdata-index"),o=document.createElement("div");console.log("currentProj ID: ",e),o.classList.add("addItem"),o.innerHTML='\n    <form>\n        \n        <label for="title">Title:</label><br>\n        <input  id="newFormTitle" value="task name"><br>\n        \n        <label for="desc">Desc:</label><br>\n        <input  id="newFormDesc"  value="description"><br>\n        \n        <label for="newFormDate">DueDate:</label><br>\n        <input  id="newFormDate" value="12/12/1980"><br><br>\n        \n        <input type="radio" id="newFormHigh" name="prio">\n        <label>High</label><br>\n        <input type="radio" id="newFormMedium" name="prio">\n        <label>Medium</label><br>\n        <input type="radio" id="newFormLow" name="prio">\n        <label>Low</label>\n        \n    </form> \n    <button id=\'addItemConfirm\'>Confirm</button> \n    <button id=\'addItemCancel\'> Cancel </button>\n    ',document.body.append(o);let l=document.querySelector("#newFormHigh"),r=document.querySelector("#newFormMedium"),d=document.querySelector("#newFormLow"),c=document.querySelector("#addItemConfirm"),a=document.querySelector("#addItemCancel"),i="low";a.addEventListener("click",(e=>{o.remove()})),c.addEventListener("click",(c=>{let a=document.querySelector("#newFormTitle").value,s=document.querySelector("#newFormDesc").value,m=document.querySelector("#newFormDate").value;l.checked?i="high":r.checked?i="med":d.checked&&(i="low");let u={title:a,desc:s,date:m,prio:i,objId:Number(1),complete:!1};o.remove(),console.log("moments b4 array: ",t[e]),t[e].todoArray.push(u);let p=t[e].todoArray.findIndex((e=>e.title===a));return console.log("proj id"+e),n(u,e,p,"penis"),localStorage.setItem("savedDict",JSON.stringify(t)),u}))})()}));let r=(o,r,d)=>{console.log("addProjectToList");let c=document.createElement("li");c.textContent=o.projectName,c.classList.add("projectListItems");let a=0;r?(c.setAttribute("projdata-index",e),a=e):(c.setAttribute("projdata-index",d),a=d),Number(e),r&&(t[Number(e)]=o),c.addEventListener("mouseenter",(e=>{i.textContent="X",i.style.display="inline"})),c.addEventListener("mouseleave",(e=>{i.style.display="none"})),e=Number(e)+1,localStorage.setItem("currentProjId",e);let i=document.createElement("button");i.classList.add("projDelButton"),c.appendChild(i),i.style.display="none",i.addEventListener("click",(e=>{delete t[a],c.remove(),localStorage.setItem("savedDict",JSON.stringify(t))})),localStorage.setItem("savedDict",JSON.stringify(t)),l.appendChild(c),c.addEventListener("click",(e=>{let t=document.querySelector(".active");document.querySelectorAll(".ass").forEach((e=>e.remove())),t&&t.classList.remove("active"),c.classList.add("active");let l=o.todoArray;l.forEach((e=>{let t=l.findIndex((t=>t.title===e.title));n(e,o.projectId,t)}))}))};if(document.querySelector(".addProjectButton").addEventListener("click",(o=>{console.log("add proj click"),console.log("onclick ID: ",e),(()=>{let o=document.createElement("div");o.classList.add("addItem"),o.innerHTML='\n    <form>\n        \n        <label for="title">Title:</label><br>\n        <input  id="newFormTitle" value="task name"><br>\n        \n        \n    </form> \n    <button id=\'addItemConfirm\'>Confirm</button> \n    <button id=\'addItemCancel\'> Cancel </button>',document.body.append(o);let n=document.querySelector("#addItemConfirm");document.querySelector("#addItemCancel").addEventListener("click",(e=>{o.remove()})),n.addEventListener("click",(n=>{let l=((e,t)=>{let o=e,n=Number(t),l=[];return{todoArray:l,addToArray:e=>{l.push(e)},showArray:()=>{console.log(l)},projectName:o,projectId:n}})(document.querySelector("#newFormTitle").value,e);r(l,!0),localStorage.setItem("savedDict",JSON.stringify(t)),o.remove()}))})()})),o){let n=1;console.log(o),t=o,Object.entries(t).forEach((([e,t])=>{n<e&&(n=e),console.log(e),console.log(t),r(t,!1,e)})),console.log("largestkey = ",n),console.log("XXXXXXXXXXXXXXXXXXXXXXX"),e=Number(n)+1,console.log("savedProjId: "+e+" type: "+typeof e)}document.addEventListener("click",(e=>{console.log(t)}))})();